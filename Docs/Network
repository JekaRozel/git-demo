
   Компьютерные сети:
 Классификация сетей
  тип коммуникации 
   а) коммутация каналов(телефон) в) коммутация пакетов(отказоустойчивость)
  технология передачи 
   а)широковещательные в) точка-точка
  протяжённость: персональная<=1m, локальная<=1km, муниципальная<=10km, глобальная<=1000rm, объеденение сетей<=10000km.
 Топология - способ соединения компов между собой в сеть
  Полносвязная, ячеистая, звезда(роутер), кольцо, дерево, общая шина. Везде используется смешанная.
  Физическая - соединение устройств; 
  Логическая - правила распространения сигналов в сети.
  Пример классический Ethernet - физически звезда, логически общая шина.
  Пример коммутируемый Ethernet - физически звезда, логически полносвязная.
  Пример wi-fi - физически нет, логически общая шина.
Cтандарты:
 De jure - юридические, законные
 De facto - фактические, заслуженные, устоявшиеся.
ISO Международная организация по стандартизации - эталонная модель взаимодействия открытых сетей
IEEE Институт инженеров по электронике и электротехнике - технологии передачи данных (сетевое оборудование)
IAB Совет по архитектуре интернета - протоколы интернет
W3C консорциум - стандарты Web
 Стандарты IEEE (коммитеты №)
802.3 Ethernet
802.11 wi-fi (local wirless networks)
802.15 Bluetooth (personal networks)
802.16 WiMAX (широкополосные беспроводные)
  Исследования интернет IRTF (Internet Research Task Force), Проектирование интернет IETF (Iternet Engineering Task Force). Документ  RFC (Request for comments) протоколы (793 TCP, 791 IP, 826 ARP, 792 ICMP, 2131 DHCP)
 W3C документы - называют рекомеднадиями. Отвечают за HTML, CSS, WebServices architech, XML и многое другое.
  Построение сети.
Декомпозиция: шаблон "Уровни". Каждый уровень выполняет чётко определённые функции. Уровень предоставляет сервис верхнему уровню.
  Базовые Понятия:
 Сервис - описывает какие функции реализует уровень.
 Интерфейс - набор примитивных операций, которые нижний уровень предоставляет верхнему. Реальное общени внутри компа; Сокеты. 
 Протокол - правила и соглашения, используемые для связи уровня А одного компа с уровнем А другого компа. Виртуальное общени между компами. Заголовки протокола.
 Архитектура сети: -набор уровней и протоколов сети; -Интерфейсы не входят в архитектуру.
 Стек протоколов: - иерархически орнганизованный набор протоколов, достаточный для организации взаимодействия по сети.
   2 эталонные модели:
 Модель взаимодействия открытых систем (ISO OSI) (De juro) 
Юридический стандарт международной организации стандартизации ISO
7 уровней, протоколы не входят в модель
Хорошая теоретическая проработка
На практике не используется
 Модель TCP/IP (De facto)
Фактический стандарт на основе популярного стека протоколов TCP/IP
4 уровня
Протоколы TCP/IP широко используются на практике
Основа интернета
   Инкапсуляция.
 Включение сообщения вышестоящего уровня в сообщение нижестоящего уровня. Сообщение: заголовок+данные+концевик. т.е. При каждой передаче на следующий нижний уровень добовляется заголовок.
    Эталонная модель описывает какие уровни должны быть в сети и какие функции должны выпольняться на каждом уровне. 
  Модель OSI (Open Systems Interconnection) Модель взаимодействия открытых сетей Стандарт с 1983г.
 Открытая система - построенная на открытой спецификации(общедоступной, соответствующей стаднартам). Приемущества - сеть из оборудования разных производителей, Возможность замены отдельных компонентов сети, Лёгкость объединения нескольких сетей.
 Модель OSI описывает назначение каждого из 7-ми уровней организации сети. Не является архитектурой. Протоколы описаны в отдельных стандартах и не применяются на практике. Является "теоретическим шаблоном" для разных сетей.
  Список уровней: 
1 Physical Физический - передача битов по физическому каналу связи (не вникает что передаёт)  \бит, работает Концентратор
2 Data LinkКанальный - передача сообщений по каналу связи, определение начла/конца сообщения в потоке бит. Обнаружение и коррекция ошибок.(в широковещательной сети: управление доступом к сркдк передачи данных; физическая адресация.)  \Кадр(frame), работает Коммутатор, точка доступа
3 Network Сетевой - объеденяет сети, построенные на основе разных технологий. Задачи: -создание составной сети, осгласование различий в сетях, -Адресация(сетевые или глобальные адреса), -Определене маршрута пересылки пакетов в составной сети(маршрутизация).  \Пакет, работает Маршрутизатор
4 Trapsport Транспортный - передача данных между процессами на хостах. Управление надёжностью: -может предоставлять надёжность выше чем у сети, -Наиболее популярный сервис - защищенный от ошибок канал с гарантированным порядком следования сообщений.  Сквозной уровень: -Сообщения доставляются от источника адресату, -Предыдущие уровни используют прицип звеньев цепи.  \Сегмент/Дейтаграмма, работает на хостах
5 Session Сеансовый - позволяет устанавливать сеансы связи. Задачи: -Управление диалогом(очерёдность передачи сообщений) -Управление маркерами(предотвращение одновременного выполнения критичной операции), -Синхронизация(метки в сообщениях для возобновления передачи в случае сбоя). (в реале не использется)  \Сообщение, работает на хостах
6 Presentation Уровень представления - обеспечивает согласование синтаксиса и семантики передаваемыз данных(форматы представления символов и чисел), Шифрование и дешифрование. Пример: Transport Layer Security (TLS) / Secure Sockets Layer (SSL)  \Сообщение, работает на хостах
7 Application Прикладной уровень - Набор приложений, полезных пользователям:  -Гипертекстовые Web-страницы  -Социальные сети  -Видео и аудио связь  -Электронная почта  -Доступ к разделяемым файлам и т.д.  \Сообщение, работает на хостах
   TCP/IP Вторая эталонная модель de facto стандарт как строить сени на основе разных технологий
 TCP/IP модель состоит из 4-х уровней:
  1 Сетевых интерфейсов (в OSI 1Физический 2Канальный) - интерфейсы для взаимодействия с сетевыми технологиями (Wi-Fi, Ethernet, DSL)
  2 Интернет (в OSI 3Сетевой) - поиск маршрута (IP,icmp, arp, dhcp)
  3 Транспортный (в OSI 4Транспортный) - обеспечивает связь между процессами на разных компах (TCP, UDP)
  4 Прикладной (в OSI 5Сеансовый 6Представления 7Прикладной) (HTTP, SMTP, DNS, FTP)
Сейчас модель используемая на практике ближе всего к виду:
 1 физический
 2 канальный 
 3 сетевой
 4 транспортный
 5 прикладной
    Задачи физического уровня: предоставить биты информации в виде сигналов передаваемых по среде.
Характеристики канала связи: скорость(-пропускная способность(бит/с) + -задержка(время доставки))  -Кол-во ошибок
Типы каналов связи: -симплексный -дуплексный -полудуплексный
    Канальный уровень - Множественный доступ к каналу связи: -адресация -согласованный доступ.
Методы выделения кадров: 
  -указатель количества байт (в начале каждого кадра указывается его длинна в байтах) не применяется одна ошибка - хана всему
  -вставка байтов(byte stuffing) (начало/конец отмечаются спец. последовательностями бит/байтов; Протокол BSC текстовые символы( DLE STX - начало стартТекст, DLE ETX -конец ендТекст) Escape последовательностьв данных - DLE(дэйта ликн ескэйп);  Протоколы DHLC и PPP - биты  01111110 начало  и конец,  в данных после 5-и последовательных 1 добалсялся 0.  
  -вставка битов(bit stuffing)  Преамбула (классический Ethernet) длинна 8 байт, первые 7-10101010 последний - 10101011(ограничитель начала кадра)    Передача неиспользуемх символов избыточного кода (Fast Ethernet) начало кадра - J и K (11000 и 10001), конец - Т (01101)
  -средства физического уровня.
   Механизмы обработки ошибок:
 Обнаружежине ошибок - (как) контрольная сумма, (что) пропуск битых кадров.
 Исправление ошибок - (как) коды исправляющие ошибки, (что) обнаружение и исправление битых кадров.
 Повторная отправка данных - (как) если есть ошибка(обнаружение) или не дошёл (что) повторная отправка кадра (методы: 1 остановка и ожидание (ожидание подтверждения получения кадра) wifi, 2 Скользящее окно - передача группами(размер окна), ожидание подтверждения получения группы.)
  Каналы связи с редкими ошибками надо обрабатывать на верхних уровнях, с частыми(wifi) на канальном уровне. 
  Технологии канального уровня - Ethernet, wifi;  
  Канальный уровень состоит из :
   подуровень управления логическим каналом (LLC). Отвечает за передачу данных, общий для разных технологий. Мультиплексирование - передача данных разных протоколов на уровень МАС, Управление потоком, не заваливает(затопление) данными. 
   подуровень управления доступом к среде (MAC). Совместное использование разделяемой среды, адресация, Специфичный для разных технологий, не обязательный.
 Коллизия - искажение данных из-за одновременной передачи разными устройствами. Способ борьбы - Управление доступом. Методы - 1рандомизированный - из К компов случайно выбирается один с вероятностью 1/К(Ethernet, wifi); 2На основе правил использования.
  Ethernet. 802.3(u,z,ab,bz,ae,an,ba)
 Две технологии под одним именем
- Классический Ethernet - разделяемая среда, используется с Ethernet до Gigabit Ethernet. 
- Коммутируемый Ethernet - точка-точка, используется с Fast Ethernet и дальше, единственный вариант в 10G Ethernet и выше.
 История.
 Коаксиальный кабель - общая шина через Т коннекторы 
 Концентратор hub - витая пара, физическая топология - звезда, логическая топология - общая шина.
 Физический уровень: коаксиальный кабель, витая пар, оптоволокно.
 Канальный уровень: одинаковые для всех(физических) методы доступа и протоколы; смешанны MAC и LLC.
 Ethernet II родитель Ethernet 802.3 но используется чаще из-за проволочек с принятием стандарта Ethernet 802.3.
 Формат кадра Ethernet(байт)
 6адрполучателя|6адротправителя|2тип|46-15000данные|4контрольнаясумма (заголовок|данные|концевик)
   MAC адреса. Media Access Control
  Используются на подуровне управления доступом к среде канального уровня. Служит д я идентификации сетевых интерфейсов и узлов сети. Стандарт IEEE 802 (Ethernet IEEE 802.3, Wi-Fi IEEE 802.11) Длинна 6 байт(48 бит). Форма записи 6 шестнадцатиричных чисел.
 Типы МАС адресов: 
-Индивидуальный (unicast)
-Групповой (multicast) отличается тем, что первый бит старшего байта адреса равен 01. (первое число 01). Принимают только те кто в группе, настроены на конкретный приём.
-Широковещательный (broadcast) Все значения шестнадцатиричная единица : FF-FF-FF-FF-FF-FF
 Уникальны, не должны повторяться. Номера присваивают 
 а) производитель(первые 3 байта OUI уникальный идентификатор организации, выдаёт IEEE, последние на усмотрение производителя), 
 б)админ сети( тогда рекомендуется указывать первое число 01) 
	Ethternet
 Необходим метод обеспечения согласованного доступа к общей среде. Компы используют сеть по одному, поочерёдно. Метод доступа к среде: CSMA/CD. Carrier Sense Multiple Access with Collision Detection/Множественный доступ с прослушиванием несущей частоты  и обнаружением коллизий.
 Компы передают данные только если среда свободна, для определения свободна ли используют основную "гармонику сигнала".
 Коллизия - наложение одновременных сигналов от разных компьютеров. Если принятый сигнал отличается от переданного - значит коллизия, либо комп передаёт и принимает одновременно.  
 Если обнаружена коллизия, то компом передаётся Jam-последовательность чтобы предупредить других. 
 Модель  CSMA/CD 
 1. Период передачи. Еисли нет несущей частоты, то начинается передача. Сначала преамбула(для синхронизации) длинной 8 байт(первые 7 чередование 0 и 1 послейдний заканчивается 11, затем кадр первые 6 байт которого читают(записывают в буфер) все компы в сети, т.к. в этих байтах указан адрес получателя, определив получателя он продолжает запись, остальные чистят буфер,(promiscuous mode тестовый режим когда адаптер принимает все кадры, не глядя на адрес(для диагностики)). затем межкадровый интервал, 9,6 мкс антимонополия и сброс  сетевых адаптерод до исходного состояния; 
 2. Период конкуренции, при коллизии пауза на L*512 битовых интервалов(0,1 мкс, L - случайное число из диапазона 0:2^N-1, где N-номер попытки). Это экспоненциальный двоичный алгоритм отсрочки. после 10 попыток интервал не увеличивается, после 16 попыток передача прекращается.; 
 3. Период простоя; 
  Недостатки классического Ethernet:
  - плохая масштабируемость - падает если загрузка разделяемой среды > 30%, количество компов >30.
  - низкая безопасность - данные доступны всем в сети.
  - разное время доставки кадра - коллизии.
Решение проблем : коммутируемый Ethernet.
	коммутируемый Ethernet:
 Приемущества перед классическим Ethernet Отсутствует разделяемая среда. Нет коллизий. Коммутаторы.
 Внешне похожие устройства Концентратор hub (топология общая шина, Физический уровень) и Коммутатор switch (полносвязная топология, Канальный уровень).
  Особенности работы Коммутаторов:
 Таблица коммутации
   - соответствие МАС-адресов портам коммутатора
 Алгоритм обратного обучения
   - Заполнение таблицы коммутации
 Алгоритм прозрачного моста
   - Передача кадров коммутатором
Мост - устройство для объеденения нескольких сетей, 
Прозрачный мост незаметен для сетевых устройств, не требует настройки.
Коллизии не возникают т.к. к каждому порту подключен конкретный комп.(полный дуплекс).








	










